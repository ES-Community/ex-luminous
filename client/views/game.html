<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Ludum-dare-45</title>
    <link rel="stylesheet" href="../public/reset.css" />
    <link rel="stylesheet" href="../public/game.css" />
  </head>
  <body>
    <div id="fade">
      <p id="fade-txt"></p>
      <span id="fade-span">New connection attempt in five seconds</span>
      <div id="close-window" class="btn">close window</div>
    </div>
    <div id="game"></div>
    <script>
      const { start } = require("../src/game.js");

      const fadeTxt = document.getElementById("fade-txt");

      // Retrieve server name and current player name
      const whatwgLocation = new URL(window.location.href);
      const server = whatwgLocation.searchParams.get("server") || "127.0.0.1:50051";
      const name = whatwgLocation.searchParams.get("name") || "invite";
      fadeTxt.innerHTML = `üïê Connection in progress to <b>${server}</b>`;

      // console.log(`remote server ip: ${server}`);
      // console.log(`player name: ${name}`);

      start(server, name).catch(console.error);
    </script>
  </body>
</html>
